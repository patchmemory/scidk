{% extends 'base.html' %}
{% block title %}-SciDK->{% endblock %}
{% block head %}
<style>
  /* Override base.html main width constraint for settings page */
  main {
    max-width: 100% !important;
    padding: 0 !important;
  }

  .settings-container {
    display: flex;
    height: calc(100vh - 60px);
    gap: 0;
  }

  .settings-sidebar {
    width: 220px;
    min-width: 220px;
    background: #f9f9f9;
    border-right: 1px solid #e0e0e0;
    overflow-y: auto;
    padding: 1rem 0;
  }

  .settings-sidebar-item {
    padding: 0.75rem 1.5rem;
    cursor: pointer;
    color: var(--fg);
    text-decoration: none;
    display: block;
    border-left: 3px solid transparent;
    transition: all 0.15s ease;
  }

  .settings-sidebar-item:hover {
    background: #f0f0f0;
  }

  .settings-sidebar-item.active {
    background: #fff;
    border-left-color: var(--accent);
    font-weight: 600;
  }

  .settings-content {
    flex: 1;
    overflow-y: auto;
    padding: 2rem;
    max-width: 1100px;
  }

  .settings-section {
    display: none;
  }

  .settings-section.active {
    display: block;
  }

  .settings-section h1 {
    margin-top: 0;
    margin-bottom: 0.5rem;
  }

  .settings-section > p.small {
    margin-bottom: 1.5rem;
  }

  .badge {
    display: inline-block;
    padding: 0.25rem 0.5rem;
    font-size: 0.85em;
    font-weight: 500;
    border-radius: 4px;
    background: #e9ecef;
    color: #495057;
    margin-right: 0.25rem;
  }
</style>
{% endblock %}
{% block content %}
<div class="settings-container">
  <!-- Sidebar Navigation -->
  <nav class="settings-sidebar">
    <a href="#general" class="settings-sidebar-item active" data-section="general">General</a>
    <a href="#neo4j" class="settings-sidebar-item" data-section="neo4j">Neo4j</a>
    <a href="#chat" class="settings-sidebar-item" data-section="chat">Chat</a>
    <a href="#interpreters" class="settings-sidebar-item" data-section="interpreters">Interpreters</a>
    <a href="#plugins" class="settings-sidebar-item" data-section="plugins">Plugins</a>
    <a href="#rclone" class="settings-sidebar-item" data-section="rclone">Rclone</a>
    <a href="#integrations" class="settings-sidebar-item" data-section="integrations">Integrations</a>
    <a href="#alerts" class="settings-sidebar-item" data-section="alerts">Alerts</a>
  </nav>

  <!-- Content Area -->
  <div class="settings-content">
    {% include 'settings/_general.html' %}
    {% include 'settings/_neo4j.html' %}
    {% include 'settings/_chat.html' %}
    {% include 'settings/_interpreters.html' %}
    {% include 'settings/_plugins.html' %}
    {% include 'settings/_rclone.html' %}
    {% include 'settings/_integrations.html' %}
    {% include 'settings/_alerts.html' %}
  </div>
</div>

<script>
  // Settings navigation - shared tab switching logic
  document.addEventListener('DOMContentLoaded', () => {
    const navItems = document.querySelectorAll('.settings-sidebar-item');
    const sections = document.querySelectorAll('.settings-section');

    navItems.forEach(item => {
      item.addEventListener('click', (e) => {
        e.preventDefault();

        // Update active nav item
        navItems.forEach(nav => nav.classList.remove('active'));
        item.classList.add('active');

        // Show corresponding section
        const sectionId = item.dataset.section + '-section';
        sections.forEach(section => section.classList.remove('active'));
        document.getElementById(sectionId).classList.add('active');

        // Update URL hash without scrolling
        history.replaceState(null, null, '#' + item.dataset.section);
      });
    });

    // Handle initial hash navigation
    const hash = window.location.hash.slice(1);
    if (hash) {
      const targetNav = document.querySelector(`[data-section="${hash}"]`);
      if (targetNav) {
        targetNav.click();
      }
    }
  });
</script>
{% endblock %}
