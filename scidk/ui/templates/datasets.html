{% extends 'base.html' %}
{% block title %}SciDK - Files{% endblock %}
{% block content %}
<h1>Files</h1>
<section>
  <h2>Load Directory</h2>
  <form action="/scan" method="post">
    <label>Path: <input type="text" name="path" placeholder="/path/to/scan" style="width: 24rem"/></label>
    <label><input type="checkbox" name="recursive" checked/> Recursive</label>
    <button type="submit">Scan</button>
  </form>
  {% if directories %}
    <details>
      <summary class="small">Previously scanned (this session)</summary>
      <ul>
        {% for d in directories %}
          <li><code>{{ d.path }}</code> â€” files: {{ d.scanned }}, recursive: {{ d.recursive }}</li>
        {% endfor %}
      </ul>
    </details>
  {% endif %}
</section>

<section>
<table>
  <thead>
  <tr>
    <th>Path</th>
    <th>Ext</th>
    <th>Size</th>
    <th>Interpreters</th>
  </tr>
  </thead>
  <tbody>
  {% for d in datasets %}
    <tr>
      <td><a href="/datasets/{{ d.id }}">{{ d.path }}</a></td>
      <td>{{ d.extension }}</td>
      <td class="small">{{ d.size_bytes }}</td>
      <td class="small">{{ d.interpretations.keys()|list }}</td>
    </tr>
  {% else %}
    <tr><td colspan="4" class="small">No datasets yet.</td></tr>
  {% endfor %}
  </tbody>
</table>
</section>
{% endblock %}