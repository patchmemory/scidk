Bootstrap: docker
From: neo4j:5.20.0

%help
  Neo4j 5.x container for SciDK deployments in HPC/Singularity contexts.

%labels
  Maintainer SciDK
  Version 5.20.0
  Description "Neo4j for SciDK"

%environment
  export NEO4J_AUTH=${NEO4J_AUTH:-neo4j/neo4jiscool}
  export NEO4J_dbms_default__listen__address=${NEO4J_LISTEN_ADDR:-0.0.0.0}
  export NEO4J_dbms_connector_bolt_listen__address=${NEO4J_BOLT_ADDR:-:7687}
  export NEO4J_dbms_connector_http_listen__address=${NEO4J_HTTP_ADDR:-:7474}
  export NEO4J_server_memory_heap_initial__size=${NEO4J_HEAP_INIT:-1G}
  export NEO4J_server_memory_heap_max__size=${NEO4J_HEAP_MAX:-2G}
  export NEO4JLABS_PLUGINS='["apoc","n10s"]'
  export NEO4J_dbms_security_procedures_unrestricted='apoc.* , n10s.*'
  export NEO4J_apoc_export_file_enabled=true
  export NEO4J_apoc_import_file_enabled=true
  export NEO4J_apoc_import_file_use__neo4j__config=true

%post
  echo "Using base docker://neo4j:5.20.0"

%runscript
  exec neo4j "$@"
